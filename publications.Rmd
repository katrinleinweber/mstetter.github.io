---
title: "Publications"
---
```{r,results='asis',message=FALSE,warning=FALSE,echo=FALSE}
library(scholar)
library(knitr)
library(RefManageR)
```

## Preprint
```{r,results='asis',message=FALSE,warning=FALSE,echo=FALSE}

my_preprint <- ReadBib('preprints.bib')
my_preprint <- as.data.frame(my_preprint)
my_preprint$author <- "Markus G Stetter, Daniel J Gates, Wenbin Mei, Jeffrey Ross-Ibarra" 
my_preprint$author <- gsub(my_preprint$author,pattern = 'Markus G Stetter',replacement = '**Markus G Stetter**')

preprints <- paste(sep='',my_preprint$title,' ', my_preprint$author,' [preprint]','(https://peerj.com/preprints/2902/)')
cat(preprints)
cat('\n\n')

```

```{r,results='asis',message=FALSE,warning=FALSE,echo=FALSE}
my_pubs <- ReadBib('publications.bib')
#sort(my_pubs, sorting = "nyt")
my_pubs <-GetDOIs(my_pubs)
my_pubs <- as.data.frame(my_pubs)

## add google scholar stats
# scholar_profile<-get_profile("yYKVZQQAAAAJ")

# scholar_citations<-get_publications("yYKVZQQAAAAJ")
# scholar_citations <- data.frame(scholar_citations$title,scholar_citations$cites)
# names(scholar_citations) <- c('title','cites')
# pubs_citations <- merge(my_pubs,scholar_citations,by = 'title',all.x = TRUE)

pubs_citations <- my_pubs # comment this out when using google citation
### make own name bold
pubs_citations$author <- gsub(pubs_citations$author,pattern = 'Markus G Stetter',replacement = '**Markus G Stetter**')
pubs_citations <- pubs_citations[order(pubs_citations$no,decreasing = T),]

years <- unique(pubs_citations$year)
for (y in years){
year <- data.frame(subset(pubs_citations, year==y,drop = TRUE))
cat(paste('##',y,sep=''))
cat('\n\n')
for (i in 1:length(year$title)){
publications <- paste(sep='','[',year$title,']','(http://dx.doi.org/',year$doi,')',' ',year$author,'. *',year$journal,'*') # ,' Citations:',pubs_citations$cites)
cat(publications[i])
if (!is.na(year$preprint)){
  cat(paste(sep='',' [preprint]','(http://dx.doi.org/',year$preprint[i],')'))
}
cat('\n\n')
}
}

```


```{r,echo=FALSE}
#\* Data retrieved from google scholar
```